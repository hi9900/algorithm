# [자물쇠와 열쇠](https://school.programmers.co.kr/learn/courses/30/lessons/60059)

잠겨있는 자몰쇠는 격자 한 칸의 크기가 `1 x 1`인 `N x N` 크기의 정사각 격자 형태이고 특이한 모양의 열쇠는 `M x M` 크기의 정사각 격자 형태로 되어있다.

자물쇠에는 홈이 파여있고 열쇠 또한 홈과 돌기 부분이 있다. 
열쇠는 회전과 이동이 가능하며 열쇠의 돌기 부분을 자물쇠의 홈 부분에 딱 맞게 채우면 자물쇠가 열리게 되는 구조이다.
자물쇠 영역을 벗어난 부분에 있는 열쇠의 홈과 돌기는 자물쇠를 여는 데 영향을 주지 않지만, 
자물쇠 영역 내에서는 열쇠의 돌기 부분과 자물쇠의 홈 부분이 정확히 일치해야 하며 열쇠의 돌기와 자물쇠의 돌기가 만나서는 안된다.
또한 자물쇠의 모든 홈을 채워 비어있는 곳이 없어야 자물쇠를 열 수 있다.

열쇠를 나타내는 2차원 배열 key와 자물쇠를 나타내는 2차원 배열 lock이 매개변수로 주어질 때,
열쇠로 자물쇠를 열 수 있으면 true를, 열 수 없으면 false를 return 하라.

[제한사항]

- key는 M x M (3 <= M <= 20, M은 자연수) 크기 2차원 배열이다.
- lock은 N x N (3 <= N <= 20, N은 자연수) 크기 2차원 배열이다.
- M은 항상 N 이하이다.
- key와 lock의 원소는 0 또는 1로 이루어져 있다.
    - 0은 홈 부분, 1은 돌기 부분을 나타낸다.
    
[입출력 예시]

```
입력
key = [[0, 0, 0], [1, 0, 0], [0, 1, 1]]
lock = [[1, 1, 1], [1, 1, 0], [1, 0, 1]]

출력
result = true
```

---

## 문제 분석 및 알고리즘 설계

배열의 크기가 20 이하이므로, 모든 조합을 탐색하는 완전 탐색으로 문제 해결이 가능하다.

[문제 분석]
- 열쇠의 돌기(1)가 자물쇠의 홈(0)을 정확히 메워야 함
- 돌기끼리 겹치면 안 됨
- 모든 자물쇠의 홈이 메워져야 함

[알고리즘 설계]
1. 열쇠 회전 함수 만들기
2. 자물쇠 확장하기
    - 열쇠가 자물쇠 밖으로 이동할 수 있기 때문에, 자물쇠를 3배 크기로 확장해 중앙에 원본 자물쇠를 채워넣는다.
3. 자물쇠와 열쇠 맞춰보기
    - 모든 회전(4번), 모든 이동(x, y) 만큼 반복
    1. 확장된 자물쇠 배열에 열쇠 값을 더한다.
    2. 중앙 부분에서 모든 값이 1인지 확인한다.
    3. 맞으면 True 반환

### [문제 풀이](10_sol.py)

---

## 해설

- 열쇠 회전 함수는 `zip`을 이용해 간단하게 만들 수 있다.

```python
# 2차원 배열 matrix를 90도 시계방향으로 회전
def rotate_90(matrix):
    return list(zip(*matrix[::-1]))
```

- 자물쇠 확장
  - 열쇠가 움직일 수 있는 범위는 `N + 2 * (M-1)` 만큼이다. 하지만 단순화를 위해 자물쇠를 3배로 확장한다.
  - 자물쇠를 3배로 확장하면, 중앙에 원래 자물쇠를 그대로 복사해 넣고, 열쇠를 `0 ~ 2N` 범위에서만 움직이면 된다.
